<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>CFi Admin Dashboard</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<link href="modal-styles.css" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101c22",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display">
<div class="flex min-h-screen">
<!-- Mobile Menu Overlay -->
<div class="fixed inset-0 z-40 bg-black/50 backdrop-blur-sm lg:hidden hidden" id="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>

<aside class="fixed lg:static inset-y-0 left-0 z-50 w-64 flex-shrink-0 bg-white dark:bg-background-dark border-r border-primary/20 flex flex-col transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out" id="sidebar">
<div class="p-6">
<div class="flex items-center gap-3">
<img src="/cfi-logo.png" alt="CFI Logo" class="h-10 w-10 rounded-full">
<h1 class="text-lg font-bold text-slate-800 dark:text-white">CFi Ideation Team</h1>
</div>
</div>
<nav class="flex-1 px-3 py-2 space-y-2">

<a class="flex items-center gap-3 px-3 py-2 text-white bg-primary rounded" href="#" onclick="showTab('students')" id="students-nav">
<svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M164.47,195.63a8,8,0,0,1-6.7,12.37H10.23a8,8,0,0,1-6.7-12.37,95.83,95.83,0,0,1,47.22-37.71,60,60,0,1,1,66.5,0A95.83,95.83,0,0,1,164.47,195.63Zm87.91-.15a95.87,95.87,0,0,0-47.13-37.56A60,60,0,0,0,144.7,54.59a4,4,0,0,0-1.33,6A75.83,75.83,0,0,1,147,150.53a4,4,0,0,0,1.07,5.53,112.32,112.32,0,0,1,29.85,30.83,23.92,23.92,0,0,1,3.65,16.47,4,4,0,0,0,3.95,4.64h60.3a8,8,0,0,0,7.73-5.93A8.22,8.22,0,0,0,252.38,195.48Z"></path>
</svg>
<span class="font-medium">Students</span>
</a>
<a class="flex items-center gap-3 px-3 py-2 mt-2 text-slate-600 dark:text-slate-300 rounded hover:bg-primary/10 hover:text-primary dark:hover:bg-primary/20" href="#" onclick="showTab('content')" id="content-nav">
<svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1,0-16H224A8,8,0,0,1,232,208Zm0-152V168a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Zm-68,56a8,8,0,0,0-3.71-6.75l-44-28A8,8,0,0,0,104,84v56a8,8,0,0,0,12.29,6.75l44-28A8,8,0,0,0,164,112Z"></path>
</svg>
<span class="font-medium">Content Management</span>
</a>
<a class="flex items-center gap-3 px-3 py-2 mt-2 text-slate-600 dark:text-slate-300 rounded hover:bg-primary/10 hover:text-primary dark:hover:bg-primary/20" href="#" onclick="showTab('assignments')" id="assignments-nav">
<svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM152,88V44l44,44Z"></path>
</svg>
<span class="font-medium">Assignment Management</span>
</a>
</nav>
<div class="p-4 mt-auto">
<button onclick="logout()" class="w-full bg-primary text-white font-semibold py-3 px-4 rounded hover:bg-primary/90 transition-colors">
Logout
</button>
</div>
</aside>
<!-- Mobile Menu Button -->
<button class="lg:hidden fixed top-4 left-4 z-30 p-2 bg-white dark:bg-background-dark rounded-lg shadow-lg border border-primary/20" onclick="toggleMobileMenu()" id="mobile-menu-btn">
<span class="material-symbols-outlined text-slate-800 dark:text-white">menu</span>
</button>

<main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto lg:ml-0">
<div class="max-w-6xl mx-auto">
<div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6 sm:mb-8 pt-12 lg:pt-0">
<h2 class="text-2xl sm:text-3xl font-bold text-slate-800 dark:text-white" id="page-title">Students</h2>
</div>

<!-- Students Section -->
<div id="students-section">
<div class="mb-6">
<p class="text-sm text-slate-600 dark:text-slate-300">Manage student accounts and track progress</p>
</div>
<div class="mt-8">
<div class="relative">
<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
<svg class="fill-current text-slate-400 dark:text-slate-500" height="20" viewBox="0 0 256 256" width="20" xmlns="http://www.w3.org/2000/svg">
<path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
</svg>
</div>
<input class="w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-background-dark text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Search students" type="text" id="student-search"/>
</div>
</div>
<div class="mt-4 overflow-x-auto -mx-4 sm:mx-0">
<div class="inline-block min-w-full align-middle">
<div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-none sm:rounded-lg">
<table class="min-w-full divide-y divide-slate-200 dark:divide-slate-700">
<thead class="bg-background-light dark:bg-background-dark/60">
<tr>
<th class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider" scope="col">Name</th>
<th class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider" scope="col">Email</th>
<th class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider" scope="col">Progress</th>
<th class="relative px-6 py-3" scope="col">
<span class="sr-only">Actions</span>
</th>
</tr>
</thead>
<tbody class="bg-white dark:bg-background-dark divide-y divide-slate-200 dark:divide-slate-700" id="students-list">
</tbody>
</table>
</div>
</div>
</div>
</div>

<!-- Content Section -->
<div id="content-section" class="hidden">
<div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
<h3 class="text-lg sm:text-xl font-bold text-slate-800 dark:text-white">Course Weeks</h3>
<button onclick="showContentModal()" class="px-4 py-3 text-sm font-bold text-white bg-primary rounded-lg hover:bg-primary/90 min-h-[44px]">
Add New
</button>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6" id="content-list">
</div>
</div>

<!-- Assignments Section -->
<div id="assignments-section" class="hidden">
<div class="mb-6">
<p class="text-sm text-slate-600 dark:text-slate-300">Review and approve student assignments</p>
</div>
<div class="mt-4 overflow-x-auto -mx-4 sm:mx-0">
<div class="inline-block min-w-full align-middle">
<div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-none sm:rounded-lg">
<table class="min-w-full divide-y divide-slate-200 dark:divide-slate-700">
<thead class="bg-background-light dark:bg-background-dark/60">
<tr>
<th class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider" scope="col">Student</th>
<th class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider" scope="col">Email</th>
<th class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider" scope="col">Week</th>
<th class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider" scope="col">Title</th>
<th class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider" scope="col">Status</th>
<th class="relative px-6 py-3" scope="col">
<span class="sr-only">Actions</span>
</th>
</tr>
</thead>
<tbody class="bg-white dark:bg-background-dark divide-y divide-slate-200 dark:divide-slate-700" id="assignments-list">
</tbody>
</table>
</div>
</div>
</div>
</div>

</div>
</main>
</div>

<!-- Content Modal -->
<div id="content-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 backdrop-blur-sm p-4" onclick="closeModalOnBackdrop(event)">
  <div class="w-full max-w-md max-h-[95vh] overflow-hidden rounded-3xl bg-white dark:bg-slate-900 shadow-2xl transform transition-all duration-300 scale-95 opacity-0" id="content-modal-container">
    <!-- Modal Header -->
    <div class="sticky top-0 bg-gradient-to-r from-primary/5 to-blue-50 dark:from-slate-800 dark:to-slate-900 border-b border-slate-100 dark:border-slate-700 px-8 py-6">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center">
            <span class="material-symbols-outlined text-primary text-xl">edit</span>
          </div>
          <div>
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white">Edit Content</h3>
            <p class="text-sm text-slate-500 dark:text-slate-400">Course Content Management</p>
          </div>
        </div>
        <button onclick="closeContentModal()" class="group p-3 hover:bg-white/80 dark:hover:bg-slate-800/80 rounded-2xl transition-all duration-200 hover:scale-105" aria-label="Close modal">
          <span class="material-symbols-outlined text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-300 text-xl">close</span>
        </button>
      </div>
    </div>
    <!-- Modal Body -->
    <div class="overflow-y-auto max-h-[calc(95vh-120px)] custom-scrollbar">
      <div class="p-8">
        <form onsubmit="saveContent(event)" class="space-y-6">
          <input type="hidden" id="content-week">
          <div>
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Week Number</label>
            <input type="number" id="content-week-number" class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-background-dark text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary transition-all" min="1" max="10">
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Title</label>
            <input type="text" id="content-title" class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-background-dark text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary transition-all" required>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Description</label>
            <textarea id="content-description" class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-background-dark text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary transition-all" rows="3" required></textarea>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Video Links (Single or Multiple)</label>
            <textarea id="content-video-ids" class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-background-dark text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary transition-all" rows="3" placeholder="Single video: https://www.youtube.com/watch?v=dQw4w9WgXcQ

Multiple videos (comma-separated):
https://www.youtube.com/watch?v=video1,
https://www.youtube.com/watch?v=video2"></textarea>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Assignment Question</label>
            <textarea id="content-assignment-question" class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-background-dark text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary transition-all" rows="3" placeholder="What assignment should students complete for this week?"></textarea>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Tool Icon URL</label>
            <input type="text" id="content-image-icon" class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-background-dark text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary transition-all" placeholder="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico">
          </div>
          <div class="flex gap-4 pt-6">
            <button type="submit" class="flex-1 px-6 py-3 bg-primary text-white rounded-xl hover:bg-primary/90 font-semibold transition-all duration-200 hover:scale-105 btn-enhanced">Save Changes</button>
            <button type="button" onclick="closeContentModal()" class="flex-1 px-6 py-3 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-300 dark:hover:bg-slate-600 font-semibold transition-all duration-200 hover:scale-105">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Assignment Review Modal -->
<div id="assignment-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 backdrop-blur-sm p-4" onclick="closeModalOnBackdrop(event)">
  <div class="w-full max-w-md max-h-[95vh] overflow-hidden rounded-3xl bg-white dark:bg-slate-900 shadow-2xl transform transition-all duration-300 scale-95 opacity-0" id="assignment-modal-container">
    <!-- Modal Header -->
    <div class="sticky top-0 bg-gradient-to-r from-primary/5 to-blue-50 dark:from-slate-800 dark:to-slate-900 border-b border-slate-100 dark:border-slate-700 px-8 py-6">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center">
            <span class="material-symbols-outlined text-primary text-xl">assignment</span>
          </div>
          <div>
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white" id="assignment-modal-title">Review Assignment</h3>
            <p class="text-sm text-slate-500 dark:text-slate-400">Assignment Review</p>
          </div>
        </div>
        <button onclick="closeAssignmentModal()" class="group p-3 hover:bg-white/80 dark:hover:bg-slate-800/80 rounded-2xl transition-all duration-200 hover:scale-105" aria-label="Close modal">
          <span class="material-symbols-outlined text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-300 text-xl">close</span>
        </button>
      </div>
    </div>
    <!-- Modal Body -->
    <div class="overflow-y-auto max-h-[calc(95vh-120px)] custom-scrollbar">
      <div class="p-8">
        <div class="space-y-6">
          <input type="hidden" id="assignment-student-id">
          <input type="hidden" id="assignment-week">
          <div>
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Feedback (Optional)</label>
            <textarea id="assignment-feedback" class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-background-dark text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary transition-all" rows="4" placeholder="Enter feedback for the student..."></textarea>
          </div>
          <div class="flex gap-3 pt-6">
            <button onclick="approveAssignmentFromModal()" class="flex-1 px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 font-semibold transition-all duration-200 hover:scale-105">Approve</button>
            <button onclick="rejectAssignmentFromModal()" class="flex-1 px-6 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 font-semibold transition-all duration-200 hover:scale-105">Reject</button>
            <button onclick="closeAssignmentModal()" class="flex-1 px-6 py-3 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-300 dark:hover:bg-slate-600 font-semibold transition-all duration-200 hover:scale-105">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Student Detail Modal -->
<div id="student-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 backdrop-blur-sm p-4" onclick="closeModalOnBackdrop(event)">
  <div class="w-full max-w-2xl max-h-[95vh] overflow-hidden rounded-3xl bg-white dark:bg-slate-900 shadow-2xl transform transition-all duration-300 scale-95 opacity-0" id="student-modal-container">
    <!-- Modal Header -->
    <div class="sticky top-0 bg-gradient-to-r from-primary/5 to-blue-50 dark:from-slate-800 dark:to-slate-900 border-b border-slate-100 dark:border-slate-700 px-8 py-6">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center">
            <span class="material-symbols-outlined text-primary text-xl">person</span>
          </div>
          <div>
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white" id="student-modal-title">Student Details</h3>
            <p class="text-sm text-slate-500 dark:text-slate-400">Student Progress & Information</p>
          </div>
        </div>
        <button onclick="closeStudentModal()" class="group p-3 hover:bg-white/80 dark:hover:bg-slate-800/80 rounded-2xl transition-all duration-200 hover:scale-105" aria-label="Close modal">
          <span class="material-symbols-outlined text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-300 text-xl">close</span>
        </button>
      </div>
    </div>
    <!-- Modal Body -->
    <div class="overflow-y-auto max-h-[calc(95vh-120px)] custom-scrollbar">
      <div class="p-8" id="student-modal-content">
        <!-- Content will be populated by JavaScript -->
      </div>
    </div>
  </div>
</div>

<div id="message" class="fixed top-4 right-4 z-50 hidden rounded-lg p-4 text-white shadow-lg"></div>

<script src="admin.js"></script>
</body>
</html>